@model PowerFest.viewModelServico
@{
    ViewBag.Title = "Cadastrar Serviço";
}

@using (Html.BeginForm("Create", "ServicoGeral", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    @Html.AntiForgeryToken()
    @Html.ValidationSummary(true, "", new { @class = "text-danger" })
    <!-- Sidebar/menu -->
    <nav class="w3-sidebar w3-collapse w3-white w3-animate-left" style="z-index:3;width:300px;" id="mySidebar">
        <br>
        <div class="w3-container">
            <a href="https://www.w3schools.com/w3css/tryw3css_templates_portfolio.htm#" onclick="w3_close()" class="w3-hide-large w3-right w3-jumbo w3-padding w3-hover-grey" title="close menu">
                <i class="fa fa-remove"></i>
            </a>
            <img src="./tela_files/imgBuffet.jpg" style="width:50%;" class="w3-round"><br><br>
            <h4><b>Nome Empresa</b></h4>
            <p class="w3-text-grey">Buffet</p>
        </div>
        <div class="w3-bar-block">
            <a href="https://www.w3schools.com/w3css/tryw3css_templates_portfolio.htm#portfolio" onclick="w3_close()" class="w3-bar-item w3-button w3-padding w3-text-teal"><i class="fa fa-th-large fa-fw w3-margin-right"></i>PORTIFÓLIO</a>
            <a href="https://www.w3schools.com/w3css/tryw3css_templates_portfolio.htm#about" onclick="w3_close()" class="w3-bar-item w3-button w3-padding"><i class="fa fa-user fa-fw w3-margin-right"></i>SOBRE</a>
            <a href="https://www.w3schools.com/w3css/tryw3css_templates_portfolio.htm#contact" onclick="w3_close()" class="w3-bar-item w3-button w3-padding"><i class="fa fa-envelope fa-fw w3-margin-right"></i>CONTATO</a>
        </div>
        <div class="w3-panel w3-large">
            <i class="fa fa-facebook-official w3-hover-opacity"></i>
            <i class="fa fa-instagram w3-hover-opacity"></i>            
            <i class="fa fa-linkedin w3-hover-opacity"></i>
        </div>
    </nav>

    <!-- Overlay effect when opening sidebar on small screens -->
    <div class="w3-overlay w3-hide-large w3-animate-opacity" onclick="w3_close()" style="cursor:pointer" title="close side menu" id="myOverlay"></div>

    <!-- !PAGE CONTENT! -->
    <div class="w3-main" style="margin-left:300px">

        <!-- Header -->
        <header id="portfolio">
            <a href="https://www.w3schools.com/w3css/tryw3css_templates_portfolio.htm#"><img src="./tela_files/imgBuffet.jpg" style="width:65px;" class="w3-circle w3-right w3-margin w3-hide-large w3-hover-opacity"></a>
            <span class="w3-button w3-hide-large w3-xxlarge w3-hover-text-grey" onclick="w3_open()"><i class="fa fa-bars"></i></span>
            <div class="w3-container">
                <h1><b>Nome Empresa</b></h1>
                <div class="w3-section w3-bottombar w3-padding-16">
                    <span class="w3-margin-right">Filtros:</span>
                    <button class="w3-button w3-black">Todos</button>
                    <button class="w3-button w3-white w3-hide-small"><i class="fa fa-photo w3-margin-right"></i>Fotos</button>
                    <button class="w3-button w3-white w3-hide-small"><i class="fa fa-map-pin w3-margin-right"></i>Videos</button>
                    <button class="w3-button w3-white"><i class="fa fa-diamond w3-margin-right"></i>Agenda</button>
                </div>
            </div>
        </header>
        <!-- First Photo Grid-->
        <div class="w3-row-padding">

            <div class="w3-third w3-container w3-margin-bottom">
                <div class="form-group">
                    @Html.LabelFor(model => model.images_1, htmlAttributes: new { @class = "control-label col-md-2" })
                    <div class="col-md-10">
                        <img id="Tela_1" Name="Tela_1"  class="w3-hover-opacity port"><br/>
                        @Html.TextBoxFor(model => model.images_1, "", new { @type = "file" })
                        @Html.ValidationMessageFor(model => model.images_1, "", new { @class = "text-danger" })

                    </div>
                    
                </div>
                <div class="w3-container w3-white">
                    <input type="text" class="form-group" placeholder="descrição da imagem ..." />
                </div>
            </div>

            <div class="w3-third w3-container w3-margin-bottom">
                <div class="form-group">
                    @Html.LabelFor(model => model.images_2, htmlAttributes: new { @class = "control-label col-md-2" })
                    <div class="col-md-10">
                        <img id="Tela_2" Name="Tela_2"  class="w3-hover-opacity port"><br />
                        @Html.TextBoxFor(model => model.images_2, "", new { @type = "file" })
                        @Html.ValidationMessageFor(model => model.images_2, "", new { @class = "text-danger" })
                    </div>
                </div>
                <div class="w3-container w3-white">
                    <input type="text" class="form-group" placeholder="descrição da imagem ..." />
                </div>
            </div>

            <div class="w3-third w3-container w3-margin-bottom">
                <div class="form-group">
                    @Html.LabelFor(model => model.images_3, htmlAttributes: new { @class = "control-label col-md-2" })
                    <div class="col-md-10">
                        <img id="Tela_3" Name="Tela_3"  class="w3-hover-opacity port"><br />
                        @Html.TextBoxFor(model => model.images_3, "", new { @type = "file" })
                        @Html.ValidationMessageFor(model => model.images_3, "", new { @class = "text-danger" })
                    </div>
                </div>
                <div class="w3-container w3-white">
                    <input type="text" class="form-group" placeholder="descrição da imagem ..." />
                </div>
            </div>
        </div>

        <!-- Second Photo Grid-->
        <div class="w3-row-padding">
            <div class="w3-third w3-container w3-margin-bottom">
                <input type="text" placeholder="link do seu video..." id="link_video" name="link_video" class="form-group" /><button type="button" onclick="testarLinkVideo()" class="btn btn-default btn-group-sm">Testar</button>
                <div class="w3-container" id="player">
                </div>
            </div>

        </div>
        <div class="form-horizontal">

            <div class="form-group">
                @Html.LabelFor(model => model.servico.nome, "Nome", htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    @Html.EditorFor(model => model.servico.nome, new { htmlAttributes = new { @class = "form-control" } })
                    @Html.ValidationMessageFor(model => model.servico.nome, "", new { @class = "text-danger" })
                </div>
            </div>
            <div class="form-group">
                @Html.LabelFor(model => model.servico.descricao, "Descrição", htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    @Html.EditorFor(model => model.servico.descricao, new { htmlAttributes = new { @class = "form-control" } })
                    @Html.ValidationMessageFor(model => model.servico.descricao, "", new { @class = "text-danger" })
                </div>
            </div>
            <div class="form-group">
                @Html.LabelFor(model => model.servico.email, "E-mail", htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    @Html.EditorFor(model => model.servico.email, new { htmlAttributes = new { @class = "form-control" } })
                    @Html.ValidationMessageFor(model => model.servico.email, "", new { @class = "text-danger" })
                </div>
            </div>
            <div class="form-group">
                @Html.LabelFor(model => model.servico.site, "Site", htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    @Html.EditorFor(model => model.servico.site, new { htmlAttributes = new { @class = "form-control" } })
                    @Html.ValidationMessageFor(model => model.servico.site, "", new { @class = "text-danger" })
                </div>
            </div>

            <div class="form-group">
                @Html.LabelFor(model => model.id_categoria, "Categoria", htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    @Html.DropDownListFor(model => model.id_categoria, (IEnumerable<SelectListItem>)ViewBag.dropCategoria, new { htmlAttributes = new { @class = "form-control" } })
                    @Html.ValidationMessageFor(model => model.id_categoria, "", new { @class = "text-danger" })
                </div>
            </div>
                      
            <input type="submit" value="salvar" />
        </div>
    </div>
}

<script>
 
        function enviar_imagem(input,tela) {
            if (input.files && input.files[0]) {
                var reader = new FileReader();

                reader.onload = function (e) {
                    $('#Tela_'+tela).attr('src', e.target.result);
                }

                reader.readAsDataURL(input.files[0]);
            }
        }

        $("#images_1").change(function () {
            enviar_imagem(this,'1');
        });
        $("#images_2").change(function () {
            enviar_imagem(this, '2');
        });
        $("#images_3").change(function () {
            enviar_imagem(this, '3');
        });
        $("#images_4").change(function () {
            enviar_imagem(this, '4');
        });

        function testarLinkVideo() {
            var link = $("#link_video").val();
            if (link != null || link != "") {
                $('#player').html(link);
            }
        }
</script>